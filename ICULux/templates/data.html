{%extends "layout.html" %}
</head>
<body>
{%block body %}
<link rel= "stylesheet" type= "text/css" href= "{{ url_for('static',filename='css/data.css') }}"/>
	<header class="masthead" style="background-image: url('static/img/heartbeat.gif');">
    <div class="overlay"></div>
    
    <div class="container">
      <div class="row">
        <div class="col-lg-8 col-md-10 mx-auto">
          <div class="site-heading">
            <h1>ICUlux</h1>
            <span class="subheading">Patient Monitor</span>
          </div>
        </div>
      </div>
    </div>
  </header>
  <script src="https://code.jquery.com/jquery-3.3.1.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/1.7.3/socket.io.min.js"></script>

  <script>
    var eventSource = new EventSource("/data_stream")
    
    eventSource.addEventListener("message", function(e) {
      console.log(e.data)
    }, false)

    eventSource.addEventListener("online", function(e) {
      // console.log(e.data.color)
      data = JSON.parse(e.data)
      var name = String(data.name)
      document.querySelector("#"+name+".val1").innerText = data.val1
    }, true)
</script>

<h3>Patient Information</h3>
  <table name="patient_data" style="width: 100%;">
    {% for row in data %}
    <tbody>
        <tr>
            <th class="text">Patient ID:</th>
            <td class="numeric">{{row[0]}}</td>
        </tr>  
        <tr>
            <th class="text">Name:</th>
            <td class="numeric">{{row[1]}}</td>
        </tr>
        <tr>
            <th class="text">Age:</th>
            <td class="numeric">{{row[2]}}</td>
        </tr>
        <tr>
            <th class="text">Gender:</th>
            <td class="numeric">{{row[3]}}</td>
        </tr>
        <tr>
            <th class="text">Disease:</th>
            <td class="numeric">{{row[5]}}</td>
        </tr>
        <tr>
            <th class="text">Date of Arrival:</th>
            <td class="numeric">{{row[4]}}</td>
        </tr>
      </tbody>
    {% endfor %}
  </table>

  <a href="/data_stream"><button name="start" id="start" onclick="startload()">Start</button></a>

  
  
  <h3 id="RESP">Respiratory Rate</h3>
  
    <p>Value: </p>
    <span class="val1"></span><br>
    <p>Current Nature: </p>
    <span class="condition"></span><br>
    <span class="message"></span><br>
    <p>Nature of Change: </p>
    <span class="change"></span>

  <h3 id="CBP">CBP</h3>

  <p>Systolic: </p>
    <span class="val2"></span><br>
  <p>Mean: </p>
    <span class="val3"></span><br>
  <p>Diastolic: </p>
    <span class="val1"></span><br>
    <p>Current Nature: </p>
    <span class="condition"></span><br>
    <span class="message"></span><br>
    <p>Nature of Change: </p>
    <span class="change"></span>

  <h3 id="ABP">Arterial Blood Pressure</h3>
  
  <p>Systolic: </p>
    <span class="val2"></span><br>
  <p>Mean: </p>
    <span class="val3"></span><br>
  <p>Diastolic: </p>
    <span class="val1"></span><br>
    <p>Current Nature: </p>
    <span class="condition"></span><br>
    <span class="message"></span><br>
    <p>Nature of Change: </p>
    <span class="change"></span>
    
  <h3 id="NBP">Non-Invasive Blood Pressure</h3>
  
  <p>Systolic: </p>
    <span class="val2"></span><br>
  <p>Mean: </p>
    <span class="val3"></span><br>
  <p>Diastolic: </p>
    <span class="val1"></span><br>
    <p>Current Nature: </p>
    <span class="condition"></span><br>
    <span class="message"></span><br>
    <p>Nature of Change: </p>
    <span class="change"></span>
    
  <h3 id="SpO2">SpO2</h3>
  
    <p>Value: </p>
    <span class="val1"></span><br>
    <p>Current Nature: </p>
    <span class="condition"></span><br>
    <span class="message"></span><br>
    <p>Nature of Change: </p>
    <span class="change"></span>

  <h3 id="HR">Heart Rate</h3>

    <p>Value: </p>
    <span class="val1"></span><br>
    <p>Current Nature: </p>
    <span class="condition"></span><br>
    <span class="message"></span><br>
    <p>Nature of Change: </p>
    <span class="change"></span>

  <h3 id="PULSE">Pulse</h3>
  
    <p>Value: </p>
    <span class="val1"></span><br>
    <p>Current Nature: </p>
    <span class="condition"></span><br>
    <span class="message"></span><br>
    <p>Nature of Change: </p>
    <span class="change"></span>
  <h3 id="CO">Cardiac Output</h3>
  
    <p>Value: </p>
    <span class="val1"></span><br>
    <p>Current Nature: </p>
    <span class="condition"></span><br>
    <span class="message"></span><br>
    <p>Nature of Change: </p>
    <span class="change"></span>
  
  <h3 id="TBlood">Blood Temperature</h3>
  <h3 id="PAP">Pulmonary Artery Pressure</h3>
  
  <p>Systolic: </p>
    <span class="val2"></span><br>
  <p>Mean: </p>
    <span class="val3"></span><br>
  <p>Diastolic: </p>
    <span class="val1"></span><br>
    <p>Current Nature: </p>
    <span class="condition"></span><br>
    <span class="message"></span><br>
    <p>Nature of Change: </p>
    <span class="change"></span>
    
  <h3 id="LAP">LAP</h3>
 
    <p>Value: </p>
    <span class="val1"></span><br>
    <p>Current Nature: </p>
    <span class="condition"></span><br>
    <span class="message"></span><br>
    <p>Nature of Change: </p>
    <span class="change"></span>

  <h3  id="CVP">Central Venous Pressure</h3>
  
    <p>Value: </p>
    <span class="val1"></span><br>
    <p>Current Nature: </p>
    <span class="condition"></span><br>
    <span class="message"></span><br>
    <p>Nature of Change: </p>
    <span class="change"></span>

  <h3  id="EtCO2">End Tidal CO2</h3>
  
    <p>Value: </p>
    <span class="val1"></span><br>
    <p>Current Nature: </p>
    <span class="condition"></span><br>
    <span class="message"></span><br>
    <p>Nature of Change: </p>
    <span class="change"></span>
    
  <h3 id="AWRR">Airway Respiratory Rate</h3>
  
    <p>Value: </p>
    <span class="val1"></span><br>
    <p>Current Nature: </p>
    <span class="condition"></span><br>
    <span class="message"></span><br>
    <p>Nature of Change: </p>
    <span class="change"></span>
 
  <h3 id="PAWP">Pulmonary Artery Wedge Pressure</h3>
  
    <p>Value: </p>
    <span class="val1"></span><br>
    <p>Current Nature: </p>
    <span class="condition"></span><br>
    <span class="message"></span><br>
    <p>Nature of Change: </p>
    <span class="change"></span>
  
  <h3 id="IMCO2">Inspired Minimum CO2</h3>
  <h3 id="ART">ART</h3>
  <h3 id="ART1">ART1</h3>
  <h3 id="ST1">ST1</h3>
  <h3 id="ST2">ST2</h3>
  <h3 id="ST3">ST3</h3>
  <h3 id="P4">P4</h3>
  <h3 id="Unlicensed assistive personnel">UAP</h3>

</div>
  {% endblock %}